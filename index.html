<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Suivi B√©b√©</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="style.css">

    <link rel="icon" href="/image/icon-192x192.png" type="image/png">
    <link rel="apple-touch-icon" href="/image/icon-192x192.png">
    <link rel="manifest" href="manifest.json" crossorigin="use-credentials">
</head>
<body>
       <div id="loading-overlay">
        <div class="spinner"></div>
        <p>Connexion en cours...</p>
    </div>
 <div id="offline-indicator" class="hidden">...</div>

    <header>
        <div class="brand">
            <h1>Suivi B√©b√©</h1>
            <p class="subtitle">Enregistrez chaque moment pr√©cieux</p>
        </div>
        <div class="header-actions">
            <button id="theme-toggle-button" title="Changer le th√®me" aria-label="Changer le th√®me">üåô</button>
            <button id="settings-button" title="Param√®tres" aria-label="Param√®tres">‚öôÔ∏è</button>
        </div>
    </header>

    <main>
        <section id="accueil">
            <div id="accueil-info" class="info-panel">
                <div class="info-item"><span class="info-label">Pr√©nom</span><span id="bebe-nom" class="info-value">Mon B√©b√©</span></div>
                <div class="info-item"><span class="info-label">√Çge</span><span id="bebe-age" class="info-value">-</span></div>
                <div class="info-item"><span class="info-label">Dernier Poids</span><span id="bebe-poids" class="info-value">- kg</span></div>
                <div class="info-item"><span class="info-label">Derni√®re Taille</span><span id="bebe-taille" class="info-value">- cm</span></div>
            </div>

            <div class="category-grid">
                <button class="category-button" data-section="allaitement">ü§±üèª Allaitement</button>
                <button class="category-button" data-section="biberon">üçº Biberon</button>
                <button class="category-button" data-section="couche"><img src="image/couches.png" alt="Couche"> Couche</button>
                <button class="category-button" data-section="tire-lait"><img src="image/tire-lait.png" alt="Tire-Lait"> Tire-Lait</button>
                <button class="category-button" data-section="sommeil">üí§ Sommeil</button>
                <button class="category-button" data-section="sante">‚ù§Ô∏è Sant√©</button>
                <button class="category-button" data-section="humeur">üé® Humeur</button>
                <button class="category-button" data-section="hygiene">üßº Hygi√®ne</button>
                <button class="category-button" data-section="remarques">üìù Remarques</button>
                <button class="category-button" data-section="recapitulatif">üìä R√©capitulatif</button>
            </div>
        </section>

        <div id="sections-wrapper" class="hidden">

            <section id="allaitement">
                <h2>Allaitement</h2>
                <form id="form-allaitement">
                    <label>C√¥t√© :</label>
                    <div class="button-group">
                        <button type="button" class="choice-button" data-cote="gauche">Gauche</button>
                        <button type="button" class="choice-button" data-cote="droit">Droit</button>
                    </div>
                    <input type="hidden" id="cote-allaitement">
                    <div class="chrono">
                        <label>Dur√©e : <span id="chrono-display">00:00</span></label>
                        <div class="chrono-controls">
                            <button type="button" id="start-chrono-allaitement">‚ñ∂</button>
                            <button type="button" id="stop-chrono-allaitement">‚èπÔ∏è</button>
                        </div>
                    </div>
                    <button type="button" class="bouton-now" id="btn-now-allaitement">Maintenant</button>
                    <label for="date-allaitement">Date :</label> <input type="date" id="date-allaitement" required>
                    <label for="heure-allaitement">Heure :</label> <input type="time" id="heure-allaitement" required>
                    <label for="remarques-allaitement">Remarques :</label>
                    <textarea id="remarques-allaitement" rows="3"></textarea>
                    <button type="submit" class="bouton-principal">Enregistrer</button>
                    <button type="button" class="bouton-retour">Retour</button>
                </form>
            </section>

            <section id="biberon">
                <h2>Biberon</h2>
                <form id="form-biberon">
                    <button type="button" class="bouton-now" id="btn-now-biberon">Maintenant</button>
                    <label for="date-biberon">Date & Heure :</label>
                    <div class="input-group">
                        <input type="date" id="date-biberon" required>
                        <input type="time" id="heure-biberon" required>
                    </div>
                    <label>Type de lait :</label>
                    <div class="button-group">
                        <button type="button" class="choice-button" data-lait="artificiel">Artificiel</button>
                        <button type="button" class="choice-button" data-lait="maternel">Maternel</button>
                    </div>
                    <input type="hidden" id="type-lait">
                    <label for="quantite-preparee">Quantit√© pr√©par√©e (ml) :</label>
                    <input type="number" id="quantite-preparee" placeholder="ex: 120">
                    <label for="quantite-bue">Quantit√© bue (ml) :</label>
                    <input type="number" id="quantite-bue" placeholder="ex: 110">
                    <label for="remarques-biberon">Remarques :</label>
                    <textarea id="remarques-biberon" rows="3"></textarea>
                    <button type="submit" class="bouton-principal">Enregistrer</button>
                    <button type="button" class="bouton-retour">Retour</button>
                </form>
            </section>

            <section id="couche">
                <h2>Couche</h2>
                <form id="form-couche">
                    <button type="button" class="bouton-now" id="btn-now-couche">Maintenant</button>
                    <label for="date-couche">Date :</label> <input type="date" id="date-couche" required>
                    <label for="heure-couche">Heure :</label> <input type="time" id="heure-couche" required>
                    <label>Contenu :</label>
                    <div class="checkbox-group">
                        <input type="checkbox" id="check-pipi"> <label for="check-pipi">Pipi</label>
                        <input type="checkbox" id="check-selle"> <label for="check-selle">Selle</label>
                    </div>
                    <div id="details-selle" class="hidden">
                        <label for="couleur-couche">Couleur des selles :</label>
                        <select id="couleur-couche"><option value="">(aucune)</option><option value="jaunes">Jaunes</option><option value="vertes">Vertes</option><option value="marrons">Marrons</option><option value="noires">Noires</option><option value="sang">Sang</option><option value="autres">Autres</option></select>
                        <div id="autre-couleur-wrapper" class="hidden"><label for="autre-couleur-input">Pr√©cisez la couleur :</label><input type="text" id="autre-couleur-input" placeholder="ex: Blanc laiteux"></div>
                        <label for="consistance-selle">Consistance :</label>
                        <select id="consistance-selle"><option value="">(aucune)</option><option value="normale">Normale</option><option value="liquide">Liquide</option><option value="molle">Molle</option><option value="dure">Dure</option></select>
                    </div>
                    <label for="remarques-couche">Remarques :</label>
                    <textarea id="remarques-couche" rows="3"></textarea>
                    <button type="submit" class="bouton-principal">Enregistrer</button>
                    <button type="button" class="bouton-retour">Retour</button>
                </form>
            </section>

            <section id="tire-lait">
                <h2>Tire-Lait</h2>
                <form id="form-tire-lait">
                    <button type="button" class="bouton-now" id="btn-now-tire-lait">Maintenant</button>
                    <label for="date-tire-lait">Date & Heure :</label>
                    <div class="input-group">
                        <input type="date" id="date-tire-lait" required>
                        <input type="time" id="heure-tire-lait" required>
                    </div>
                    <label>C√¥t√© :</label>
                    <div class="button-group">
                        <button type="button" class="choice-button" data-cote="gauche">Gauche</button>
                        <button type="button" class="choice-button" data-cote="droit">Droit</button>
                        <button type="button" class="choice-button" data-cote="les_deux">Les deux</button>
                    </div>
                    <input type="hidden" id="cote-tire-lait">
                    <div class="conditional-inputs">
                        <div id="quantite-gauche-wrapper" class="hidden"><label for="quantite-gauche">Quantit√© Gauche (ml):</label><input type="number" id="quantite-gauche"></div>
                        <div id="quantite-droite-wrapper" class="hidden"><label for="quantite-droite">Quantit√© Droite (ml):</label><input type="number" id="quantite-droite"></div>
                    </div>
                    <div class="chrono">
                        <label>Dur√©e : <span id="chrono-display-tire-lait">00:00</span></label>
                        <div class="chrono-controls">
                            <button type="button" id="start-chrono-tire-lait">‚ñ∂</button>
                            <button type="button" id="stop-chrono-tire-lait">‚èπÔ∏è</button>
                        </div>
                    </div>
                    <label for="remarques-tire-lait">Remarques :</label>
                    <textarea id="remarques-tire-lait" rows="3"></textarea>
                    <button type="submit" class="bouton-principal">Enregistrer</button>
                    <button type="button" class="bouton-retour">Retour</button>
                </form>
            </section>
            
            <section id="sommeil">
              <h2>Sommeil</h2>
              <div id="ongoing-sleep-info" class="ongoing-info hidden">
                  <p>üò¥ Sommeil en cours depuis : <strong id="sleep-start-time"></strong></p>
              </div>

              <form id="form-sommeil">
                  <button type="button" id="start-sleep-btn" class="bouton-principal">D√©but du sommeil</button>
              </form>
              
              <form id="form-sleep-end">
                <fieldset>
                    <legend>Fin du sommeil</legend>
                    <button type="button" class="bouton-now" id="btn-now-sommeil-fin">Fin maintenant</button>
                    <div class="form-row">
                        <div class="input-wrapper">
                            <label for="date-fin-sommeil">Date :</label><input type="date" id="date-fin-sommeil">
                        </div>
                        <div class="input-wrapper">
                            <label for="heure-fin-sommeil">Heure :</label><input type="time" id="heure-fin-sommeil">
                        </div>
                    </div>
                </fieldset>
                <label for="remarques-sommeil">Remarques :</label>
                <textarea id="remarques-sommeil" rows="3"></textarea>
                <button type="submit" class="bouton-principal">Enregistrer la Fin</button>
                <button type="button" class="bouton-retour">Retour</button>
              </form>
            </section>

            <section id="sante">
                <h2>Sant√©</h2>
                <form id="form-sante">
                    <div class="form-row">
                        <div class="input-wrapper">
                            <label>L'enfant est-il malade ?</label>
                            <div class="button-group">
                                <button type="button" class="choice-button" data-malade="non">üòä Bien</button>
                                <button type="button" class="choice-button" data-malade="oui">ü§í Malade</button>
                            </div>
                            <input type="hidden" id="malade-status">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="input-wrapper">
                            <label for="date-sante">Date :</label>
                            <input type="date" id="date-sante" required>
                        </div>
                        <button type="button" class="bouton-now" id="btn-now-sante">Maintenant</button>
                    </div>
                    
                    <div class="input-wrapper">
                        <label for="temperature">Temp√©rature (¬∞C) :</label>
                        <input type="number" id="temperature" step="0.1" placeholder="ex: 37.5">
                    </div>
                    
                    <div class="form-row">
                        <div class="input-wrapper">
                            <label for="poids">Poids (kg) :</label>
                            <input type="number" id="poids" step="0.01" placeholder="ex: 3.5">
                        </div>
                        <div class="input-wrapper">
                            <label for="taille">Taille (cm) :</label>
                            <input type="number" id="taille" step="0.5" placeholder="ex: 50">
                        </div>
                    </div>
                    
                    <div class="input-wrapper">
                        <label for="remarques-sante">Remarques :</label>
                        <textarea id="remarques-sante" rows="3"></textarea>
                    </div>
                    
                    <button type="submit" class="bouton-principal">Enregistrer</button>
                    <button type="button" class="bouton-retour">Retour</button>
                </form>
            </section>

            <section id="humeur">
                <h2>Humeur</h2>
                <form id="form-humeur">
                    <button type="button" class="bouton-now" id="btn-now-humeur">Maintenant</button>
                    <label for="date-humeur">Date :</label> <input type="date" id="date-humeur" required>
                    <label for="heure-humeur">Heure :</label> <input type="time" id="heure-humeur" required>
                    <label for="select-humeur">Humeur :</label>
                    <select id="select-humeur" required>
                      <option value="joyeux">Joyeux</option><option value="fatigue">Fatigu√©</option><option value="calme">Calme</option><option value="curieux">Curieux</option><option value="actif">Actif</option><option value="agite">Grognon</option><option value="stress">Stress√©</option><option value="pleurs">Pleurs</option><option value="pleurs_douleur">Pleurs de douleur</option><option value="pleurs_decharge">Pleurs de d√©charge</option>
                    </select>
                    <label for="remarques-humeur">Remarques :</label>
                    <textarea id="remarques-humeur" rows="3"></textarea>
                    <button type="submit" class="bouton-principal">Enregistrer</button>
                    <button type="button" class="bouton-retour">Retour</button>
                </form>
            </section>
            
            <section id="hygiene">
                <h2>Hygi√®ne</h2>
                <form id="form-hygiene">
                    <button type="button" class="bouton-now" id="btn-now-hygiene">Maintenant</button>
                    <label for="date-hygiene">Date :</label> <input type="date" id="date-hygiene" required>
                    <fieldset>
                        <legend>Soins</legend>
                        <div class="checkbox-group full-width"><input type="checkbox" id="check-bain"> <label for="check-bain">Bain</label></div>
                        <div class="checkbox-group full-width"><input type="checkbox" id="check-dents"> <label for="check-dents">Brossage de dents</label></div>
                    </fieldset>
                    <fieldset>
                        <legend>Nettoyage du nez</legend>
                        <div class="checkbox-group full-width"><input type="checkbox" id="check-serum"> <label for="check-serum">S√©rum physiologique</label></div>
                        <div class="checkbox-group full-width"><input type="checkbox" id="check-mouche-bebe"> <label for="check-mouche-bebe">Mouche-b√©b√©</label></div>
                    </fieldset>
                    <label for="remarques-hygiene">Remarques :</label>
                    <textarea id="remarques-hygiene" rows="3"></textarea>
                    <button type="submit" class="bouton-principal">Enregistrer</button>
                    <button type="button" class="bouton-retour">Retour</button>
                </form>
            </section>
            
            <section id="remarques">
                <h2>Remarques G√©n√©rales</h2>
                <form id="form-remarques">
                    <button type="button" class="bouton-now" id="btn-now-remarques">Maintenant</button>
                    <label for="date-remarques">Date :</label> <input type="date" id="date-remarques" required>
                    <label for="texte-remarques">Remarque :</label> <textarea id="texte-remarques" rows="4"></textarea>
                    <button type="submit" class="bouton-principal">Enregistrer</button>
                    <button type="button" class="bouton-retour">Retour</button>
                </form>
            </section>

<section id="recapitulatif">
    <h2>√âvolution</h2>
    
    <div class="chart-container">
        <canvas id="growthChart"></canvas>
    </div>

    <button id="get-recap-gemini-button" class="bouton-principal">G√©n√©rer le r√©capitulatif IA</button>
    
    <div class="button-group-recap">
        <button type="button" class="bouton-retour">Retour</button>
    </div>
</section>
        </div>

        <div id="settings-modal" class="modal hidden">
            <div class="modal-content">
                <span class="close-button">&times;</span>
                <h2>Param√®tres</h2>
                <form id="form-settings">
                    <label for="input-bebe-nom">Pr√©nom de l'enfant :</label>
                    <input type="text" id="input-bebe-nom" placeholder="Pr√©nom">
                    <label for="input-bebe-dob">Date de naissance :</label>
                    <input type="date" id="input-bebe-dob">
                    <button type="submit" class="bouton-principal">Enregistrer les param√®tres</button>
                </form>
            </div>
        </div>
    </main>
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-functions-compat.js"></script>
    
    <script src="script.js"></script>
 <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(registration => {
                        console.log('Service Worker enregistr√© avec succ√®s :', registration);
                    })
                    .catch(error => {
                        console.log('√âchec de l\'enregistrement du Service Worker :', error);
                    });
            });
        }
    </script>
</body>
</html>